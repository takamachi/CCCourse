(function(){this.ng_app=angular.module("CCCourse",["ngMaterial","ngMdIcons","ngResource","internationalPhoneNumber","ngMessages","mainController","courseController","welcomeController","commentResultController"]).config(["$mdThemingProvider","ipnConfig",function(n,e){return n.theme("default").primaryPalette("cyan").accentPalette("red"),e.defaultCountry="cn",e.preferredCountries=["cn","us","uk","de","fr","ca"],e.skipUtilScriptDownload=!0}]).config(["$httpProvider","$resourceProvider",function(n){var e;return e=localStorage.getItem("loginSession"),n.defaults.headers.common.Token=e}]).run(["$rootScope","$mdToast",function(n,e){return n.range=function(n){var e;return function(){e=[];for(var t=0;n>=0?n>t:t>n;n>=0?t++:t--)e.push(t);return e}.apply(this)},console.log("module loading,,"),n.popup_toast=function(n){return n||(n="\u8bf7\u6b63\u786e\u586b\u5199\u8868\u5355"),e.show(e.simple().textContent(n))}}])}).call(this),function(){this.ng_app.constant("SERVER_HOST","//115.159.125.112:1122/index.php")}.call(this),function(){var n,e;e="undefined"!=typeof exports&&null!==exports?exports:this,n=function(n){var e;return e={to:function(e,t,o){return this.promise.then(function(n){return void 0!==n.data&&void 0!==n.result&&void 0!==n.msg?(e[t]=n.data,o&&o.call(this,e[t],n.result,n.msg)):(e[t]=n,o&&o.call(this,e[t]))}),n},then:function(n){return this.promise.then(n)},promise:n}},ng_app.factory("NetManager",["$q","$http","SERVER_HOST","$timeout",function(e,t,o,r){var i;return i={get:function(i,c){var a,s,l,u;return l=e.defer(),a=o,s=0,u=function(){return t.get(a+i,{params:c}).success(function(n){return l.resolve(n)}).error(function(){return s>4?alert("\u64cd\u4f5c\u5931\u8d25\uff01"):(s++,r(u,500*s))})},u(),n(l.promise)},post:function(n,i){var c,a,s,l;return s=e.defer(),c=o,a=0,l=function(){return t.post(c+n,i).success(function(n){return s.resolve(n)}).error(function(){return a>4?alert("\u64cd\u4f5c\u5931\u8d25\uff01"):(a++,r(l,500*a))})},l(),s.promise}}}])}.call(this),function(){this.ng_app.directive("ncNav",function(){return{restrict:"E",transclude:!0,scope:{click_callback:"=backHandler"},link:function(n,e,t,o,r){return n.click_callback||(n.click_callback=function(){}),r(n,function(e){return n.title=e.html()})},template:'<div id="nc-nav"> <div id="back-btn" ng-click="click_callback()"> <span> <ng-md-icon class="md-icon" icon="navigate_before" size="32" id="group-add-icon"></ng-md-icon> <span>\u8fd4\u56de</span> </span> </div> <div id="title" ng-transclude> {{title}} </div> </div>'}})}.call(this),function(){this.ng_app.directive("ncStar",function(){var n;return n=function(n,e){var t,o;return o=Math.round(parseFloat(n.score)),o||(o=0),o>10&&(o=10),t=e.min&&+e.min||0,t>o&&(o=t),n.fullstar=Math.floor(o/2),e.no_half?(n.halfstar=0,n.fullstar+=o%2):n.halfstar=o%2,n.nullstar=5-n.fullstar-n.halfstar},{restrict:"E",scope:{score:"=ngModel",size:"@",min:"@"},link:function(e,t,o){return e.range=function(n){var e;return function(){e=[];for(var t=0;n>=0?n>t:t>n;n>=0?t++:t--)e.push(t);return e}.apply(this)},e.size||(e.size=16),n(e,e),e.no_half=o.$attr.noHalf,e.$watch("score",function(){return n(e,e)})},template:'<span class="nc-star"> <span ng-repeat="i in range(fullstar)"> <ng-md-icon class="nc-star-icon md-icon" icon="star" size="{{size}}"></ng-md-icon> </span> <span ng-repeat="i in range(halfstar)"> <ng-md-icon class="nc-star-icon md-icon" icon="star_half" size="{{size}}"></ng-md-icon> </span> <span ng-repeat="i in range(nullstar)"> <ng-md-icon class="nc-star-icon md-icon" icon="star_border" size="{{size}}"></ng-md-icon> </span> </span>'}})}.call(this),function(){this.ng_app.directive("ncMessage",function(){return{restrict:"E",transclude:!0,scope:{subject:"="},link:function(n,e,t,o,r){return r(n,function(e){return n.content=e.html()||"\u8be5\u9879\u4e3a\u5fc5\u586b\u9879"})},template:'<div ng-messages="subject.$error" class="nc-message"> <div ng-message="required">{{content}}</div> </div>'}})}.call(this),function(){this.ng_app.controller("ApplicationCtrl",["$scope","$window","NetManager",function(n,e,t){var o,r;return o=function(){return t.get("/User").then(function(t){var o;return console.log(t),n.current_user=t.info,+t.status<=0&&(e.location="./welcome.html"),n.able_to_comment="student"===n.current_user.type,n.comment_cbk&&n.comment_cbk(),(o=n.after_check_state)?console.log("skip wechat auth"):void 0})},r=function(){var o;if(wx)return t.get("/Wechat/token").then(function(n){return console.log(n),1===+n.status?o(n.info):void 0}),o=function(t){var o,r;return wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),r=e.location.host,o={title:"\u8ba1\u63a7\u8bc4\u8bfe",link:"http://"+r+"/welcome.html",imgUrl:"http://"+r+"/assets/wechat.jpg",trigger:function(){},success:function(){},cancel:function(){},fail:function(){}},n.current_user?o.desc="\u6211\u662f\u7b2c"+n.current_user.id+"\u4e2a\u53c2\u4e0e\u5357\u5f00\u516c\u9009\u8bfe\u8bc4\u4ef7\u548c\u5efa\u8bae\u7684\u6821\u53cb\uff0c\u4f60\u4e5f\u5feb\u6765\u53c2\u52a0\u5427":o.desc="\u90a3\u4e9b\u5e74\uff0c\u90a3\u4e9b\u4e00\u8d77\u4e0a\u8fc7\u7684\u516c\u9009\u8bfe\uff0c\u5012\u5f71\u5728\u4f60\u6211\u7684\u9752\u6625\u91cc",wx.ready(function(){return wx.onMenuShareAppMessage(o),wx.onMenuShareTimeline(o),wx.onMenuShareQQ(o),wx.onMenuShareWeibo(o),wx.onMenuShareQZone(o)})}},n.skip_login_check?void 0:(n.after_check_state=r,o())}])}.call(this),function(){this.ng_app.controller("SchemeCtrl",["$controller","$scope","$interval","$timeout","$window","$location","$http","$sce","NetManager",function(n,e,t,o,r,i,c,a,s){var l,u,m;return n("ApplicationCtrl",{$scope:e}),m=[{name:"\u8ba1\u7b97\u673a\u535a\u58eb",type:0,required:[{name:"\u8ba1\u7b97\u673a\u79d1\u5b66\u4e13\u9898\u7814\u7a76\u62a5\u544a"},{name:"\u8ba1\u7b97\u673a\u79d1\u5b66\u524d\u6cbf\u8ba8\u8bba\u73ed\uff081\uff09"},{name:"\u8ba1\u7b97\u673a\u79d1\u5b66\u524d\u6cbf\u8ba8\u8bba\u73ed\uff082\uff09"}],elective:[{name:"\u5206\u5e03\u5f0f\u64cd\u4f5c\u7cfb\u7edf"},{name:"\u7f51\u7edc\u5b58\u50a8\u7cfb\u7edf"},{name:"\u79fb\u52a8\u8ba1\u7b97\u4e0e\u65e0\u7ebf\u7f51\u7edc"},{name:"\u7f51\u7edc\u4e0e\u7cfb\u7edf\u5b89\u5168"},{name:"\u53ef\u91cd\u6784\u7cfb\u7edf"},{name:"\u4e13\u4e1a\u82f1\u8bed"},{name:"\u5a92\u4f53\u8ba1\u7b97"},{name:"\u8ba4\u77e5\u8ba1\u7b97\u4e0e\u6570\u636e\u79d1\u5b66\u5bfc\u8bba"},{name:"WEB\u5927\u6570\u636e\u6316\u6398"}]},{name:"\u8ba1\u7b97\u5b66\u7855",type:1,required:[{name:"\u4fe1\u606f\u79d1\u5b66\u524d\u6cbf"},{name:"\u4e13\u4e1a\u6570\u5b66\u57fa\u7840\uff08A\uff09"},{name:"\u8ba1\u7b97\u673a\u7b97\u6cd5\u8bbe\u8ba1\u4e0e\u5206\u6790"},{name:"\u8ba1\u7b97\u673a\u7f51\u7edc\u6280\u672f"},{name:"\u9ad8\u7ea7\u8ba1\u7b97\u673a\u7cfb\u7edf\u7ed3\u6784"}],elective:[{name:"\u8ba1\u7b97\u673a\u56fe\u5f62\u4e0e\u56fe\u50cf\u6280\u672f"},{name:"\u81ea\u7136\u8bed\u8a00\u5904\u7406"},{name:"\u5f62\u5f0f\u8bed\u8a00\u4e0e\u81ea\u52a8\u673a"},{name:"\u6a21\u5f0f\u8bc6\u522b"},{name:"\u673a\u5668\u5b66\u4e60"},{name:"\u5e76\u884c\u8ba1\u7b97\u6280\u672f"},{name:"\u4eba\u5de5\u667a\u80fd\u539f\u7406"},{name:"\u8ba1\u7b97\u673a\u89c6\u89c9"},{name:"\u6570\u636e\u5e93\u7cfb\u7edf\u5b9e\u73b0"},{name:"\u7f51\u7edc\u5b58\u50a8\u7cfb\u7edf"},{name:"\u5206\u5e03\u5f0f\u64cd\u4f5c\u7cfb\u7edf"},{name:"\u8f6f\u4ef6\u6d4b\u8bd5\u6280\u672f"},{name:"\u73b0\u4ee3\u5d4c\u5165\u5f0f\u7cfb\u7edf"}]},{name:"\u8ba1\u7b97\u4e13\u7855",type:2,required:[{name:"\u4e13\u4e1a\u6570\u5b66\u57fa\u7840\uff08A\uff09"},{name:"\u8ba1\u7b97\u673a\u7f51\u7edc\u6280\u672f"},{name:"\u8ba1\u7b97\u673a\u7b97\u6cd5\u8bbe\u8ba1\u4e0e\u5206"},{name:"\u4e13\u4e1a\u5b9e\u8df51"},{name:"\u4fe1\u606f\u68c0\u7d22"},{name:"\u77e5\u8bc6\u4ea7\u6743"},{name:"\u4e13\u4e1a\u5b9e\u8df5\u8bb2\u5ea7"},{name:"\u8ba1\u7b97\u673a\u6280\u672f\u524d\u6cbf"},{name:"\u6570\u636e\u79d1\u5b66\u524d\u6cbf"},{name:"\u8ba1\u7b97\u673a\u7f51\u7edc\u8bfe\u7a0b\u5b9e\u8df5"},{name:"\u8ba1\u7b97\u673a\u7b97\u6cd5\u8bfe\u7a0b\u5b9e\u8df5"},{name:"\u81ea\u7136\u8fa9\u8bc1\u6cd5"},{name:"\u653f\u6cbb"}],elective:[{name:"\u9ad8\u7ea7\u8ba1\u7b97\u673a\u7cfb\u7edf\u7ed3\u6784"},{name:"\u6a21\u5f0f\u8bc6\u522b"},{name:"\u673a\u5668\u5b66\u4e60"},{name:"\u8ba1\u7b97\u673a\u89c6\u89c9"},{name:"\u73b0\u4ee3\u5d4c\u5165\u5f0f\u7cfb\u7edf"},{name:"\u8ba1\u7b97\u673a\u56fe\u5f62\u4e0e\u56fe\u50cf\u6280\u672f"},{name:"\u81ea\u7136\u8bed\u8a00\u5904\u7406"},{name:"\u5f62\u5f0f\u8bed\u8a00\u4e0e\u81ea\u52a8\u673a"}]},{name:"\u63a7\u5236\u535a\u58eb",type:3,required:[{name:"\u63a7\u5236\u79d1\u5b66\u4e13\u9898\u7814\u7a76\u62a5\u544a\uff081\uff09"},{name:"\u63a7\u5236\u79d1\u5b66\u4e13\u9898\u7814\u7a76\u62a5\u544a\uff082\uff09"},{name:"\u8fd0\u7b79\u5b66\u4e0e\u6700\u4f18\u5316"}],elective:[{name:"\u9c81\u68d2\u63a7\u5236\u7406\u8bba\u57fa\u7840"},{name:"\u81ea\u9002\u5e94\u63a7\u5236\u7406\u8bba\u53ca\u5e94\u7528\u8ba8\u8bba\u73ed\uff081\uff09"},{name:"\u81ea\u9002\u5e94\u63a7\u5236\u7406\u8bba\u53ca\u5e94\u7528\u8ba8\u8bba\u73ed\uff082\uff09"},{name:"\u6a21\u7cca\u7cfb\u7edf\u4e0e\u63a7\u5236"},{name:"\u968f\u673a\u8fc7\u7a0b"},{name:"\u667a\u80fd\u9884\u6d4b\u63a7\u5236"},{name:"\u5fae\u64cd\u4f5c\u4e0e\u865a\u62df\u73b0\u5b9e"},{name:"\u4f9b\u5e94\u94fe\u5efa\u6a21\u4e0e\u7269\u6d41\u5206\u6790\u8ba8\u8bba\u73ed"},{name:"\u6cdb\u51fd\u5206\u6790\u57fa\u7840"},{name:"\u673a\u5668\u4eba\u9ad8\u7ea7\u6280\u672f"},{name:"\u57fa\u4e8e\u674e\u96c5\u666e\u8bfa\u592b\u51fd\u6570\u7684\u975e\u7ebf\u6027\u63a7\u5236"},{name:"\u673a\u5668\u4eba\u89c6\u89c9\u63a7\u5236"},{name:"\u4e09\u7ef4\u6570\u636e\u573a\u53ef\u89c6\u5316\u8ba8\u8bba\u73ed"},{name:"\u751f\u7269\u542f\u53d1\u8ba1\u7b97"},{name:"\u79fb\u52a8\u673a\u5668\u4eba\u975e\u7ebf\u6027\u63a7\u5236"}]},{name:"\u63a7\u5236\u5b66\u7855",type:4,required:[{name:"\u4fe1\u606f\u79d1\u5b66\u524d\u6cbf"},{name:"\u5efa\u6a21\u4e0e\u8fa8\u8bc6"},{name:"\u968f\u673a\u8fc7\u7a0b"},{name:"\u7ebf\u6027\u7cfb\u7edf\u7406\u8bba"},{name:"\u673a\u5668\u4eba\u5b66"}],elective:[{name:"\u4e13\u4e1a\u6570\u5b66\u57fa\u7840\uff08A\uff09"},{name:"\u8fd0\u7b79\u5b66\u4e0e\u6700\u4f18\u5316"},{name:"\u8ba1\u7b97\u673a\u7f51\u7edc\u6280\u672f"},{name:"\u8ba1\u7b97\u673a\u7b97\u6cd5\u8bbe\u8ba1\u4e0e\u5206\u6790"},{name:"\u4f9b\u5e94\u94fe\u5efa\u6a21\u4e0e\u7269\u6d41\u5206\u6790\u8ba8\u8bba\u73ed"},{name:"\u81ea\u9002\u5e94\u63a7\u5236\u7406\u8bba\u53ca\u5e94\u7528\u8ba8\u8bba\u73ed\uff081\uff09"},{name:"\u81ea\u9002\u5e94\u63a7\u5236\u7406\u8bba\u53ca\u5e94\u7528\u8ba8\u8bba\u73ed\uff082\uff09"},{name:"\u667a\u80fd\u9884\u6d4b\u63a7\u5236"},{name:"\u6570\u5b57\u4fe1\u53f7\u5904\u7406"},{name:"\u6a21\u7cca\u7cfb\u7edf\u4e0e\u63a7\u5236"},{name:"\u6a21\u5f0f\u8bc6\u522b"},{name:"\u6cdb\u51fd\u5206\u6790\u57fa\u7840"},{name:"\u673a\u5668\u4eba\u89c6\u89c9\u63a7\u5236"}]},{name:"\u63a7\u5236\u4e13\u7855",type:5,required:[{name:"\u4fe1\u606f\u79d1\u5b66\u524d\u6cbf"},{name:"\u4e13\u4e1a\u6570\u5b66\u57fa\u7840\uff08A\uff09"},{name:"\u4e13\u4e1a\u5b9e\u8df51"},{name:"\u4fe1\u606f\u68c0\u7d22"},{name:"\u77e5\u8bc6\u4ea7\u6743"},{name:"\u4e13\u4e1a\u5b9e\u8df5\u8bb2\u5ea7"},{name:"\u63a7\u5236\u5de5\u7a0b"},{name:"\u63a7\u5236\u7406\u8bba\u524d\u6cbf"},{name:"\u667a\u80fd\u673a\u5668\u4eba\u524d\u6cbf"},{name:"\u7ebf\u6027\u7cfb\u7edf\u7406\u8bba\uff08\u4e13\u7855\uff09"},{name:"\u81ea\u9002\u5e94\u63a7\u5236"},{name:"\u653f\u6cbb"},{name:"\u81ea\u7136\u8fa9\u8bc1\u6cd5"}],elective:[{name:"\u5efa\u6a21\u4e0e\u8fa8\u8bc6"},{name:"\u968f\u673a\u8fc7\u7a0b"},{name:"\u8fd0\u7b79\u5b66\u4e0e\u6700\u4f18\u5316"},{name:"\u673a\u5668\u4eba\u5b66"},{name:"\u81ea\u9002\u5e94\u63a7\u5236\u7406\u8bba\u53ca\u5e94\u7528\u8ba8\u8bba\u73ed\uff081\uff09"},{name:"\u81ea\u9002\u5e94\u63a7\u5236\u7406\u8bba\u53ca\u5e94\u7528\u8ba8\u8bba\u73ed\uff082\uff09"},{name:"\u81ea\u9002\u5e94\u63a7\u5236\u7406\u8bba\u53ca\u5e94"},{name:"\u667a\u80fd\u9884\u6d4b\u63a7\u5236"},{name:"\u6570\u5b57\u4fe1\u53f7\u5904\u7406"}]}],u=i.search().id,e.scheme=m[u],e.title=e.scheme.name,l=1,e.switching=!1,e.questions=[{options:["\u611f\u5174\u8da3\uff0c\u6709\u9700\u8981","\u8bb2\u7684\u597d","\u7ed9\u5206\u9ad8","\u5bb9\u6613\u8fc7","\u968f\u4fbf\u9009\u7684","\u5176\u4ed6"],answer:[],other:null}],e.go_advice=function(){return r.location="./teac_advice.html#?id="+u},s.get("/Scheme/"+u).then(function(n){return console.log(n),n.status?e.scheme_score=n.info:void 0}),s.get("/Scheme/"+u+"/advices").then(function(n){return console.log(n),n.status&&(e.advices=n.info,e.advices.length<10)?e.no_more=!0:void 0}),e.comment_handler=function(){return $("body").scrollTop(0),e.page_state=2,e.switching=!0},e.back_handler=function(){return e.switching?($("body").scrollTop(0),e.switching=!1):r.history.length>1?r.history.back():r.location.href="./welcome.html"},e.vote=function(n,e){var t;return"up"!==e&&"down"!==e?void console.log("wrong action"):(t=n.action?s["delete"]:s.post,s.post("/Advice/"+n.id+"/"+e).then(function(e){return console.log(e),1===+e.status?s.get("/Advice/"+n.id).then(function(e){var t;if(1===+e.status)return t=e.info,n.up=t.up,n.down=t.down,n.vote=t.vote}):void 0}))},e.load_more=function(){var n;return l+=1,n={page:l},s.get("/Scheme/"+u+"/advices",n).then(function(n){var t;return console.log(n),t=n.info,e.advices=e.advices.concat(t),t.length<10?e.no_more=!0:void 0})},null}])}.call(this),function(){this.mainCtrl=angular.module("mainController",[]),this.mainCtrl.controller("MainCtrl",["$controller","$scope","$interval","$timeout","$window","$location","$http","$sce","NetManager",function(n,e,t,o,r,i,c,a,s){var l,u,m,p,h;return e.comment_cbk=function(){return"teacher"===e.current_user.type?r.location="./teac.html":void 0},l=n("ApplicationCtrl",{$scope:e}),e.show_result=!1,e.courses=[],m=1,p=1,u=null,s.get("/Course/").then(function(n){return console.log(n),1===+n.status?e.hotCourses=n.info:void 0}),e.more=function(){var n;return p+=1,console.log(p),n={page:p},s.get("/Course/",n).then(function(n){var t;return console.log(n),t=n.info,t.length<10?void(e.no_more=!0):e.hotCourses=e.hotCourses.concat(n.info)})},e.course_handler=function(n){return r.location="./course.html#?cid="+n},e.go_search=function(n,t){var o;return e.no_more=!1,u=n||(n=""),m=t||(t=1),e.searching=!0,o={key:n,page:t},s.get("/Course/",o).then(function(n){return i.search(o),e.searching=!1,console.log(n),e.courses=n.info,e.show_result=!0,$("body").scrollTop(0),n.info.length<10?e.no_more=!0:void 0})},e.back_search=function(){return i.search(""),e.courses=null,e.show_result=!1},e.go_advice=function(){return r.location="./advice.html"},e.load_more=function(){var n;return m+=1,console.log(u),n={key:u,page:m},s.get("/Course/",n).then(function(n){var t;return console.log(n),t=n.info,t.length<10?void(e.no_more=!0):e.courses=e.courses.concat(n.info)})},void 0!==(h=i.search()).key&&(e.go_search(h.key,+h.page),u=h.key),null}])}.call(this),function(){this.ng_app.controller("AdviceFeedbackCtrl",["$controller","$scope","$interval","$timeout","$window","$http","$sce","NetManager",function(n,e,t,o,r){return n("ApplicationCtrl",{$scope:e}),e.go_main=function(){return r.location="./teac.html"},e.show_share_hint=function(){return e.show_hint=!0},e.cancel_share_hint=function(){return e.show_hint=!1}}])}.call(this),function(){this.ng_app.controller("AdviceCtrl",["$controller","$scope","$interval","$timeout","$window","$http","$sce","NetManager",function(n,e,t,o,r,i,c,a){return n("ApplicationCtrl",{$scope:e}),e.page_state=1,e.advice={},e.contact={},e.questions=[{options:["\u6709","\u6ca1\u6709","\u4e0d\u597d\u8bf4"],value:[1,-1,0],anwser:null},{options:["\u7406\u5de5\u7c7b","\u4eba\u6587\u7c7b","\u793e\u79d1\u7c7b","\u827a\u672f\u7c7b","\u5b9e\u8df5\u7c7b","\u5176\u4ed6"],keys:["technology","humanity","social","art","practice","other"],anwser:{}}],e.submit_handler=function(){var n;return n=e.advice_form,n.$setSubmitted(),n.$invalid?void e.popup_toast():(e.submiting=!0,a.post("/Advice",e.advice).then(function(){return a.get("/Contact").then(function(n){return e.submiting=!1,1!==+n.status?e.page_state=2:r.location="./advice_feedback.html"})}))},e.on_advice_page=function(){return 1===e.page_state},e.user_info_skip=function(){return r.location="./advice_feedback.html"},e.user_info_submit=function(){var n,t,o,i,c,s,l;i={},angular.copy(e.contact,i),t=e.contact_form,t.$setSubmitted(),c=t.$error.internationalPhoneNumber,delete i.phone,c||(i.phone=$("#form-phone-number input").intlTelInput("getNumber")),n=!1,s=e.contact;for(o in s)l=s[o],console.log([o,l]),l&&""!==l?n=!0:delete i[o];return n&&(n=!t.$invalid),console.log(i),console.log(n),n?(e.submiting=!0,a.post("/Contact/",i).then(function(n){return e.submiting=!1,1===+n.status?r.location="./advice_feedback.html":(console.log(n),e.popup_toast(n.info))})):(console.log(e.contact_form.mail.$error),void e.popup_toast())}}])}.call(this),function(){this.courseCtrl=angular.module("courseController",[]),this.courseCtrl.controller("CourseCtrl",["$controller","$scope","$interval","$timeout","$window","$location","$http","$sce","NetManager",function(n,e,t,o,r,i,c,a,s){var l,u;return n("ApplicationCtrl",{$scope:e}),l=i.search().cid,u=1,s.get("/Course/"+l).then(function(n){return e.course=n.info}),e.switching=!1,e.comment={},e.questions=[{options:["\u611f\u5174\u8da3\uff0c\u6709\u9700\u8981","\u8bb2\u7684\u597d","\u7ed9\u5206\u9ad8","\u5bb9\u6613\u8fc7","\u968f\u4fbf\u9009\u7684","\u5176\u4ed6"],anwser:[],other:null}],e.comment_items=[{id:1,score:2,content:"\u8bfe\u7a0b\u5927\u7eb2\u77e5\u8bc6\u4f53\u7cfb\u5b8c\u6574\uff0c\u5185\u5bb9\u4e30\u5bcc"},{id:2,score:2,content:"\u6559\u5b66\u76ee\u6807\u6e05\u6670\uff0c\u660e\u786e"},{id:3,score:2,content:"\u6559\u5b66\u5185\u5bb9\u7ed3\u6784\u5408\u7406\uff0c\u96be\u6613\u9002\u5ea6\uff0c\u8be6\u7565\u5f97\u5f53"},{id:4,score:2,content:"\u6559\u5b66\u6848\u4f8b\u5b9e\u7528\u3001\u5178\u578b\u3001\u65b0\u9896\uff0c\u53ef\u64cd\u4f5c\u6027\u5f3a"},{id:5,score:2,content:"\u6559\u5b66\u5185\u5bb9\u80fd\u53cd\u6620\u6216\u8054\u7cfb\u5b66\u79d1\u53d1\u5c55\u7684\u65b0\u601d\u60f3\uff0c\u65b0\u6982\u5ff5\uff0c\u65b0\u6210\u679c"},{id:6,score:2,content:"\u8bfe\u7a0b\u8981\u6c42\u6559\u5e08\u5177\u6709\u8f83\u9ad8\u7684\u5b66\u672f\u6c34\u5e73"},{id:7,score:2,content:"\u8bfe\u7a0b\u8981\u6c42\u6559\u5e08\u5177\u6709\u8f83\u9ad8\u7684\u5b9e\u8df5\u7ecf\u9a8c"},{id:8,score:2,content:"\u5907\u8bfe\u5145\u5206\uff0c\u6388\u8bfe\u719f\u7ec3\uff0c\u8bed\u8a00\u8868\u8fbe\u6d41\u7545\uff0c\u5bcc\u6709\u611f\u67d3\u529b"},{id:9,score:2,content:"\u53ca\u65f6\u7b54\u7591\uff0c\u8010\u5fc3\u8f85\u5bfc"},{id:10,score:2,content:"\u901a\u8fc7\u8bfe\u7a0b\uff0c\u6709\u5229\u4e8e\u5bf9\u4e13\u4e1a\u77e5\u8bc6\u9886\u57df\u7684\u638c\u63e1"},{id:11,score:2,content:"\u901a\u8fc7\u8bfe\u7a0b\uff0c\u53ef\u4fc3\u8fdb\u672c\u884c\u4e1a\u7684\u5b9e\u8df5\u80fd\u529b"},{id:12,score:2,content:"\u901a\u8fc7\u8bfe\u7a0b\uff0c\u53ef\u5f15\u5bfc\u5b66\u751f\u62d3\u5c55\u77e5\u8bc6\u9762\uff0c\u63d0\u9ad8\u81ea\u5b66\u80fd\u529b"}],s.get("/Course/"+l+"/comments").then(function(n){return console.log(n),e.comments=n.info,e.comments.length<10?e.no_more=!0:void 0}),e.vote=function(n,e){var t;return"up"!==e&&"down"!==e?void console.log("wrong action!"):(t=n[e]?s["delete"]:s.post,s.post("/Evaluation/"+n.id+"/"+e).then(function(e){return console.log(e),1===+e.status?s.get("/Evaluation/"+n.id).then(function(e){var t;if(1===+e.status)return t=e.info,n.up=t.up,n.down=t.down,n.vote=t.vote}):void 0}))},e.comment_handler=function(){return $("body").scrollTop(0),e.page_state=2,e.switching=!0},e.back_handler=function(){return e.switching?($("body").scrollTop(0),e.switching=!1):r.history.length>1?r.history.back():r.location.href="./index.html"},e.comment_submit=function(){var n,t,o,i,c,a,u;for(n=e.comment,n.score+=n.score%2,n.score=n.score>1?n.score:2,c={cid:l,advice:n.content},u=0,a=e.range(12),o=0,i=a.length;i>o;o++)t=a[o],n=e.comment_items[t],n.score+=n.score%2,n.score=n.score>1?n.score:2,u+=n.score,c["score"+(t+1)]=n.score;return c.averge=u/12,console.log(c),e.submiting=!0,s.post("/Evaluation",c).then(function(n){return 1===+n.status?r.location="./comment_result.html":(console.log(n),e.submiting=!1,e.error_msg=n.info)})},e.load_more=function(){var n;return u+=1,n={page:u},s.get("/Course/"+l+"/comments",n).then(function(n){var t;return console.log(n),t=n.info,0===t.length?void(e.no_more=!0):e.comments=e.comments.concat(n.info)})},null}])}.call(this),function(){this.ng_app.controller("TeacadviceCtrl",["$controller","$scope","$location","$interval","$timeout","$window","$http","$sce","NetManager",function(n,e,t,o,r,i,c,a,s){var l;return n("ApplicationCtrl",{$scope:e}),e.page_state=1,e.advice={},e.contact={},e.eval_items=[{id:1,score:2,content:"\u7b26\u5408\u56fd\u52a1\u9662\u5b66\u4f4d\u59d4\u5458\u4f1a\u5bf9\u5b66\u4f4d\u7533\u8bf7\u4eba\u7684\u57fa\u672c\u8981\u6c42"},{id:2,score:2,content:"\u80fd\u591f\u4ee3\u8868\u5b66\u4f4d\u7533\u8bf7\u4eba\u5728\u7406\u8bba\u77e5\u8bc6\u65b9\u9762\u5e94\u8fbe\u5230\u7684\u5e7f\u5ea6\u548c\u6df1\u5ea6"},{id:3,score:2,content:"\u80fd\u591f\u57f9\u517b\u5b66\u4f4d\u7533\u8bf7\u4eba\u5728\u884c\u4e1a\u5185\u5177\u6709\u4e00\u5b9a\u7684\u5b9e\u8df5\u80fd\u529b"},{id:4,score:2,content:"\u6ce8\u610f\u533a\u5206\u540c\u4e00\u5b66\u79d1\u4e0b\u4e0d\u540c\u5c42\u6b21\u7684\u57f9\u517b\u65b9\u6848\uff0c\u6ce8\u91cd\u5c42\u6b21\u8854\u63a5"},{id:5,score:2,content:"\u5fc5\u4fee\u8bfe\u57fa\u672c\u8986\u76d6\u4e86\u672c\u5b66\u79d1\u4e3b\u8981\u57fa\u7840\u77e5\u8bc6"},{id:6,score:2,content:"\u9009\u4fee\u8bfe\u662f\u5426\u5305\u542b\u5b66\u79d1\u524d\u6cbf\u77e5\u8bc6"},{id:7,score:2,content:"\u9009\u4fee\u8bfe\u662f\u5426\u5305\u542b\u63d0\u5347\u5b66\u751f\u5b9e\u8df5\u80fd\u529b\u7684\u8bfe\u7a0b"},{id:8,score:2,content:"\u6bcf\u95e8\u8bfe\u7a0b\u5747\u6709\u6388\u8bfe\u5185\u5bb9\u7684\u4e0d\u540c\u4fa7\u91cd\u70b9"},{id:9,score:2,content:"\u57f9\u517b\u65b9\u6848\u80fd\u591f\u4ee3\u8868\u4e00\u5b9a\u7684\u5357\u5f00\u7279\u8272"}],l=t.search().id,console.log(l),e.submit_handler=function(){var n,t,o,r,c,a,u;for(n=e.advice_form,c={type:l,scores:[],advice:""},a=e.range(9),o=0,r=a.length;r>o;o++)t=a[o],u={id:e.eval_items[t].id,score:e.eval_items[t].score},u.score+=u.score%2,u.score=u.score>1?u.score:2,c.scores.push(u);return c.advice=e.advice.content,n.$setSubmitted(),n.$invalid?void e.popup_toast():(e.submiting=!0,s.post("/Scheme",c).then(function(n){return 1!==+n.status?e.popup_toast(n.info):i.location="./advice_feedback.html"}))},e.on_advice_page=function(){return 1===e.page_state},e.user_info_skip=function(){return i.location="./advice_feedback.html"}}])}.call(this),function(){this.welcomeCtrl=angular.module("welcomeController",[]),this.welcomeCtrl.controller("WelcomeCtrl",["$controller","$scope","$interval","$timeout","$window","$http","$sce","$animate","NetManager",function(n,e,t,o,r,i,c,a,s){var l,u,m;return e.skip_login_check=!0,n("ApplicationCtrl",{$scope:e}),m={start:0,end:0},e.hide_arrow=!1,e.swiping=!1,e.login={},l=$("#page-container")[0],u=Slip(l,"y").webapp(),u.start(function(n){return e.swiping=!0,e.$apply(),"svg"===n.target.tagName?u.jump(this.page+1):void 0}),u.end(function(){return o(function(){return e.swiping=!1},400),3===this.page&&(e.hide_arrow=!0,u.destroy(),o(function(){var n,e;for(n=e=0;2>=e;n=++e)$("#welcome-"+n).hide();return $("#page-container").attr("style",""),$("#pre-loading").attr("style",""),$("#welcome").attr("style","")},400)),e.$apply()}),e.submit=function(){var n;return n=e.login_form,n.$setSubmitted(),n.$invalid?void e.popup_toast():(e.submiting=!0,s.post("/User",e.login).then(function(n){return e.submiting=!1,+n.status>0?(localStorage.setItem("loginSession",n.info.token),r.location="./index.html"):e.popup_toast(n.info)}))},e.teac_submit=function(){var n;return n={type:1},s.post("/User",n).then(function(n){return e.submiting=!1,+n.status>0?(localStorage.setItem("loginSession",n.info.token),r.location="./teac.html"):e.popup_toast(n.info)})},e.toggle_forget=function(){return e.in_forget=!e.in_forget},a.enabled(!1,$("#jwc-qr")),null}])}.call(this),function(){!function(n){return n.QueryString=function(n){var e,t,o,r,i;if(n=n.split("?")[1].split("&"),""===n)return{};for(e={},t=o=0,i=n.length;i>=0?i>o:o>i;t=i>=0?++o:--o)r=n[t].split("="),2===r.length&&(e[r[0]]=decodeURIComponent(r[1].replace(/\+/g," ")));return e}}(jQuery)}.call(this),function(){this.ng_app.controller("AllCommentsCtrl",["$controller","$scope","$interval","$timeout","$window","$http","$sce","NetManager",function(n,e,t,o,r,i,c,a){var s;return n("ApplicationCtrl",{$scope:e}),s=1,e.no_more=!0,a.get("/Advice").then(function(n){return console.log(n),e.comments=n.info,0===e.comments.length?e.no_more=!0:e.no_more=!1}),e.back_handler=function(){return r.location="./index.html"},e.go_advice=function(){return r.location="./advice.html"},e.vote=function(n,e){return"up"!==e&&"down"!==e?void console.log("wrong action!"):a.post("/Advice/"+n.id+"/"+e).then(function(e){return console.log(e),1===+e.status?a.get("/Advice/"+n.id).then(function(e){var t;if(1===+e.status)return t=e.info,n.vote=t.vote,n.up=t.up,n.down=t.down}):void 0})},e.load_more=function(){var n;return s+=1,n={page:s},a.get("/Advice",n).then(function(n){var t;return console.log(n),t=n.info,0===t.length?void(e.no_more=!0):e.comments=e.comments.concat(n.info)})}}])}.call(this),function(){this.ng_app.controller("TeacCtrl",["$controller","$scope","$interval","$timeout","$window","$http","$sce","$animate","NetManager",function(n,e,t,o,r){return n("ApplicationCtrl",{$scope:e}),e.schemes=[{name:"\u8ba1\u7b97\u673a\u79d1\u5b66\u4e0e\u6280\u672f \u535a\u58eb",type:0,id:0},{name:"\u8ba1\u7b97\u673a\u79d1\u5b66\u4e0e\u6280\u672f \u5b66\u7855",type:0,id:1},{name:"\u8ba1\u7b97\u673a\u79d1\u5b66\u4e0e\u6280\u672f \u4e13\u7855",type:0,id:2},{name:"\u63a7\u5236\u79d1\u5b66\u4e0e\u5de5\u7a0b \u535a\u58eb",type:1,id:3},{name:"\u63a7\u5236\u79d1\u5b66\u4e0e\u5de5\u7a0b \u5b66\u7855",type:1,id:4},{name:"\u63a7\u5236\u5de5\u7a0b\u4e0e\u5de5\u7a0b \u4e13\u7855",type:1,id:5}],e.back_handler=function(){return e.switching?($("body").scrollTop(0),e.switching=!1):r.history.length>1?r.history.back():r.location="./index.html"},e.scheme_handler=function(n){return r.location="./scheme.html#?id="+n},null}])}.call(this),function(){this.ng_app.controller("HotCoursesCtrl",["$controller","$scope","$interval","$timeout","$window","$location","$http","$sce","NetManager",function(n,e,t,o,r,i,c,a,s){var l;return l=1,e.type=$.QueryString(window.location.search).type,s.get("/Course?type="+e.type).then(function(n){1===n.status&&(e.courses=n.info,e.courses.length<10&&(e.no_more=!0))}),e.course_handler=function(n){return r.location="./course.html#?cid="+n},e.back_handler=function(){return r.location="./welcome.html#weclome-3"},e.load_more=function(){var n;return l+=1,n={key:"",page:l},s.get("/Course/",n).then(function(n){var t;return console.log(n),t=n.info,e.courses=e.courses.concat(t),t.length<10?e.no_more=!0:void 0})}}])}.call(this),function(){this.commentResultCtrl=angular.module("commentResultController",[]),this.commentResultCtrl.controller("CommentResultCtrl",["$controller","$scope","$interval","$timeout","$window","$http","$sce","NetManager",function(n,e,t,o,r,i,c,a){return n("ApplicationCtrl",{$scope:e}),a.get("/Evaluation/count").then(function(n){return e.count=+n.info}),e.back_search=function(){return r.location="./index.html"},e.show_share_hint=function(){return e.show_hint=!0},e.cancel_share_hint=function(){return e.show_hint=!1},null}])}.call(this);